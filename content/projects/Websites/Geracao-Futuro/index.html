<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geração Futuro | Hub de Aprendizagem</title>

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700;900&family=Space+Grotesk:wght@300;500;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        display: ['Outfit', 'sans-serif'],
                        tech: ['Space Grotesk', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            purple: '#A855F7',
                            cyan: '#22D3EE',
                            dark: '#05020A'
                        }
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'spin-slow': 'spin 12s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* --- CORE STYLES --- */
        :root {
            --card-bg: rgba(15, 23, 42, 0.6);
            --card-border: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: #020617;
            color: white;
            overflow-x: hidden;
            font-family: 'Outfit', sans-serif;
        }

        /* --- IMMERSIVE BACKGROUND --- */
        .bg-fixed-cinematic {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -50;
            background:
                radial-gradient(circle at 15% 50%, rgba(76, 29, 149, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 85% 30%, rgba(6, 182, 212, 0.15) 0%, transparent 50%);
            pointer-events: none;
        }

        .bg-stars {
            background-image:
                radial-gradient(1px 1px at 50px 50px, rgba(255, 255, 255, 0.5) 50%, transparent 100%),
                radial-gradient(1.5px 1.5px at 150px 250px, rgba(255, 255, 255, 0.3) 50%, transparent 100%);
            background-size: 500px 500px;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -40;
            opacity: 0.6;
        }

        /* --- GLASSMORPHISM CARDS --- */
        .glass-card {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Hover Effect: "Spotlight" & Lift */
        .glass-card:hover {
            background: rgba(30, 41, 59, 0.6);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-4px) scale(1.02);
            box-shadow:
                0 20px 25px -5px rgba(0, 0, 0, 0.1),
                0 0 15px rgba(168, 85, 247, 0.2);
            /* Purple Glow */
        }

        /* --- SCROLLBARS --- */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        .horizontal-scroll {
            overflow-x: auto;
            overflow-y: hidden;
            display: flex;
            gap: 1.5rem;
            padding-bottom: 2rem;
            padding-top: 1rem;
            scroll-behavior: smooth;
            /* Hide scrollbar visually but keep functionality */
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .horizontal-scroll::-webkit-scrollbar {
            display: none;
        }

        /* Left/Right Fade Mask for Sliders */
        .scroll-mask {
            mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);
            -webkit-mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);
        }

        /* --- PROGRESS BARS --- */
        .progress-bar-fill {
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        /* Shimmer effect on progress bar */
        .progress-bar-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            width: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transform: translateX(-100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            100% {
                transform: translateX(100%);
            }
        }

        /* --- ANIMATIONS --- */
        .slide-in-right {
            animation: slideInRight 0.7s ease-out forwards;
            opacity: 0;
            /* Start hidden */
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* --- HERO TEXT GRADIENT --- */
        .text-glow {
            text-shadow: 0 0 20px rgba(168, 85, 247, 0.5);
        }
    </style>
</head>

<body class="antialiased selection:bg-purple-500 selection:text-white">

    <!-- BACKGROUND LAYERS -->
    <div class="bg-fixed-cinematic"></div>
    <div class="bg-stars"></div>

    <!-- MAIN NAV / HEADER -->
    <nav
        class="fixed top-0 w-full z-50 transition-all duration-300 bg-black/50 backdrop-blur-xl border-b border-white/5 py-4 px-6 md:px-12 flex items-center justify-between">
        <!-- Logo -->
        <div class="flex items-center gap-3 group cursor-pointer" onclick="window.scrollTo(0,0)">
            <div
                class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-600 to-cyan-500 flex items-center justify-center text-white shadow-lg shadow-purple-500/20 group-hover:scale-110 transition-transform">
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
            </div>
            <div class="flex flex-col leading-none">
                <span
                    class="font-display font-bold text-xl tracking-tight text-white group-hover:text-purple-300 transition-colors">act.academy</span>
                <span class="font-tech text-[10px] uppercase tracking-[0.2em] text-cyan-400">Geração Futuro</span>
            </div>
        </div>

        <!-- Right Side: Search & Profile -->
        <div class="flex items-center gap-6">
            <!-- Help Button -->
            <button onclick="openHelp()"
                class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors group mr-2">
                <div
                    class="p-2 rounded-full bg-white/5 border border-white/10 group-hover:bg-purple-500/20 group-hover:border-purple-500/50 transition-all">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <span class="hidden md:inline text-sm font-medium">Ajuda</span>
            </button>
            <div class="relative hidden sm:block">
                <input type="text" id="searchBox" placeholder="Buscar aula..."
                    class="bg-white/5 border border-white/10 rounded-full px-5 py-2 pl-10 text-sm w-48 focus:w-64 transition-all focus:bg-white/10 focus:border-purple-500/50 outline-none placeholder-slate-500 text-white">
                <svg class="w-4 h-4 text-slate-500 absolute left-3.5 top-1/2 -translate-y-1/2" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </div>

            <div class="flex items-center gap-2">
                <div class="text-right hidden md:block">
                    <div class="text-xs text-slate-400">Progresso Geral</div>
                    <div class="text-sm font-bold text-white font-mono" id="globalProgress">0%</div>
                </div>
                <div class="w-12 h-12 rounded-full p-[2px] bg-gradient-to-tr from-purple-500 to-cyan-500">
                    <div class="w-full h-full rounded-full bg-black flex items-center justify-center overflow-hidden">
                        <span class="font-bold text-white text-xs">YOU</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <header class="relative pt-32 pb-12 px-6 md:px-16 overflow-hidden">
        <!-- Hero Content -->
        <div class="max-w-4xl relative z-10 animate-in fade-in slide-in-from-bottom duration-1000">
            <div
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-xs font-mono text-cyan-400 mb-6 backdrop-blur-md">
                <span class="w-2 h-2 rounded-full bg-cyan-400 animate-pulse"></span>
                NOVO MÓDULO DISPONÍVEL
            </div>

            <h1 class="text-5xl md:text-7xl font-display font-black text-white leading-[1.1] mb-6">
                Domine o Futuro com<br>
                <span
                    class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-400 to-cyan-400 text-glow">
                    Inteligência Artificial
                </span>
            </h1>

            <p class="text-lg md:text-xl text-slate-400 max-w-2xl leading-relaxed mb-10">
                Uma jornada interativa do básico ao avançado. Descubra como a IA está transformando o mundo e como você
                pode fazer parte dessa revolução.
            </p>

            <!-- Continue Button (Dynamic) -->
            <div id="continueHeroCard" class="hidden">
                <button
                    class="group relative px-8 py-4 bg-white text-black font-bold text-lg rounded-xl flex items-center gap-3 hover:bg-cyan-50 hover:scale-105 transition-all shadow-[0_0_20px_rgba(255,255,255,0.3)]">
                    <div class="w-8 h-8 rounded-full bg-black text-white flex items-center justify-center">
                        <svg class="w-4 h-4 ml-0.5" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8 5v14l11-7z" />
                        </svg>
                    </div>
                    <span>Continuar de onde parou</span>
                    <span id="heroContinueTitle"
                        class="text-sm font-normal text-slate-600 block pl-2 border-l border-slate-300">
                        <!-- Populated via JS -->
                    </span>
                </button>
            </div>
        </div>

        <!-- Decorative Elements -->
        <div
            class="absolute right-0 top-20 w-[600px] h-[600px] bg-gradient-to-l from-purple-600/20 to-transparent rounded-full blur-3xl pointer-events-none -z-10 animate-pulse-slow">
        </div>
    </header>

    <!-- MODULES CANVAS -->
    <main class="relative z-10 pb-20 space-y-16">

        <!-- Module Container (Dynamically Inserted) -->
        <div id="modules-container">
            <!-- Example Structure inserted by JS:
                <div class="module-row pl-6 md:pl-16">
                    <div class="flex items-center justify-between mb-6 pr-6">
                    <h3 class="flex items-center gap-4 text-2xl font-bold text-white">
                        <span class="${colors.text}">0${mod.number}.</span> ${mod.title || 'Módulo ' + mod.number}
                    </h3>
                    
                    ${mod.resource ? `
                        <a href="${mod.resource}" target="_blank" download class="flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all group text-sm font-medium text-slate-300 hover:text-white">
                            <svg class="w-4 h-4 text-cyan-400 group-hover:scale-110 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            <span>Guia do Formador</span>
                        </a>
                    ` : ''}
                </div>
                    <div class="horizontal-scroll pb-4 scroll-mask">
                         CARDS
                    </div>
                </div>
            -->
        </div>

    </main>

    <!-- MODAL VIEWER (Cinematic) -->
    <div id="modalOverlay"
        class="fixed inset-0 z-[100] bg-black/90 backdrop-blur-xl hidden opacity-0 transition-opacity duration-300">

        <!-- Toolbar -->
        <div
            class="absolute top-0 left-0 w-full h-16 flex items-center justify-between px-6 bg-gradient-to-b from-black/80 to-transparent z-20 pointer-events-none">
            <div class="flex items-center gap-4 pointer-events-auto">
                <button onclick="closeViewer()"
                    class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors group">
                    <div class="p-2 rounded-full bg-white/10 group-hover:bg-white/20">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                        </svg>
                    </div>
                    <span class="font-medium">Voltar ao Hub</span>
                </button>
                <div class="h-6 w-px bg-white/10 mx-2"></div>
                <div class="flex flex-col">
                    <span id="modalBreadcrumbMod"
                        class="text-[10px] uppercase tracking-widest text-cyan-400 font-bold">Módulo 1</span>
                    <span id="modalTitle" class="text-sm font-medium text-white shadow-black drop-shadow-md">Título da
                        Aula</span>
                </div>
            </div>

            <div class="pointer-events-auto">
                <button onclick="toggleFullscreen()" class="text-slate-400 hover:text-white transition-colors p-2"
                    title="Tela Cheia">
                    <svg class="w-6 h-6 border-2 border-current rounded p-0.5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 4l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Iframe Container -->
        <div id="modalContent"
            class="absolute inset-0 w-full h-full pt-16 pb-0 transition-all duration-300 scale-95 opacity-0 flex flex-col">
            <div class="flex-1 relative bg-black">
                <iframe id="presentationFrame" class="w-full h-full border-0 opacity-0 transition-opacity duration-700"
                    allow="fullscreen" onload="onFrameLoad()"></iframe>

                <!-- Navigation Overlays (Hover to show) -->
                <button id="prevBtn" onclick="navigateSession(-1)"
                    class="absolute left-0 top-0 h-full w-16 hover:bg-gradient-to-r from-black/50 to-transparent flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity group">
                    <svg class="w-10 h-10 text-white/50 group-hover:text-white" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                <button id="nextBtn" onclick="navigateSession(1)"
                    class="absolute right-0 top-0 h-full w-16 hover:bg-gradient-to-l from-black/50 to-transparent flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity group">
                    <svg class="w-10 h-10 text-white/50 group-hover:text-white" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- HELP MODAL -->
    <div id="helpModal"
        class="fixed inset-0 z-[110] bg-black/80 backdrop-blur-md hidden opacity-0 transition-opacity duration-300 flex items-center justify-center px-4">
        <div class="bg-slate-900 border border-white/10 rounded-2xl max-w-2xl w-full p-8 relative shadow-2xl scale-95 transition-transform duration-300 transform"
            id="helpContent">
            <button onclick="closeHelp()" class="absolute top-4 right-4 text-slate-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>

            <h2 class="text-3xl font-display font-bold text-white mb-2">Guia do Formador</h2>
            <p class="text-slate-400 mb-8">Bem-vindo ao Hub de Aprendizagem Geração Futuro.</p>

            <div class="space-y-6">
                <div class="flex gap-4">
                    <div
                        class="w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center flex-shrink-0 text-purple-400">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-white font-bold text-lg">Estrutura do Módulo</h3>
                        <p class="text-slate-400 text-sm">No topo de cada módulo, encontre o botão para baixar a
                            estrutura completa do módulo (Visão Geral, Objetivos).</p>
                    </div>
                </div>

                <div class="flex gap-4">
                    <div
                        class="w-12 h-12 rounded-full bg-cyan-500/20 flex items-center justify-center flex-shrink-0 text-cyan-400">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-white font-bold text-lg">Guião da Sessão</h3>
                        <p class="text-slate-400 text-sm">Dentro do card de cada aula, clique no ícone de download para
                            baixar o guião específico daquela sessão (Passo a passo).</p>
                    </div>
                </div>

                <div class="flex gap-4">
                    <div
                        class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center flex-shrink-0 text-white">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-white font-bold text-lg">Apresentação Interativa</h3>
                        <p class="text-slate-400 text-sm">Clique em qualquer card para abrir a apresentação. Use as
                            setas do teclado para navegar. Pressione 'F' para tela cheia.</p>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-6 border-t border-white/10 text-center">
                <button onclick="closeHelp()"
                    class="bg-gradient-to-r from-purple-600 to-cyan-500 text-white font-bold py-3 px-8 rounded-full hover:scale-105 transition-transform shadow-lg shadow-purple-500/25">Entendi,
                    vamos começar!</button>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA INJECTION POINT (Will be replaced by Python script) ---
        const modules = [{ "number": 1, "title": "Módulo 1", "sessions": [{ "number": 1, "title": "Sessão 1: O que é a IA?", "url": "modulo1/sessao1/", "cover": "covers/img_module_1.png", "resource": "resources/modulo1/Sessão 1.docx" }, { "number": 2, "title": "Sessão 2: Onde está a IA?", "url": "modulo1/sessao2/", "cover": "covers/img_module_1.png", "resource": "resources/modulo1/Sessão 2.docx" }, { "number": 3, "title": "Sessão 3: Tipos de IA", "url": "modulo1/sessao3/", "cover": "covers/img_module_1.png", "resource": "resources/modulo1/Sessão 3.docx" }], "structure": "resources/modulo1/Módulo 1 - Estrutura.docx" }, { "number": 2, "title": "Módulo 2", "sessions": [{ "number": 1, "title": "Sessão 1: Pensamento Computacional", "url": "modulo2/sessao1/", "cover": "covers/img_module_2.png", "resource": "resources/modulo2/M2 - Sessão 1.docx" }, { "number": 2, "title": "Sessão 2: Algoritmos", "url": "modulo2/sessao2/", "cover": "covers/img_module_2.png", "resource": "resources/modulo2/M2 - Sessão 2.docx" }, { "number": 3, "title": "Sessão 3: tomar decisões com “se... então...” – introdução à lógica condicional", "url": "modulo2/sessao3/", "cover": "covers/img_module_2.png", "resource": "resources/modulo2/M2 - Sessão 3.docx" }, { "number": 4, "title": "Sessão 4: Loops", "url": "modulo2/sessao4/", "cover": "covers/img_module_2.png", "resource": "resources/modulo2/M2 - Sessão 4.docx" }, { "number": 5, "title": "Sessão 5", "url": "modulo2/sessao5/", "cover": "covers/img_module_2.png", "resource": "resources/modulo2/M2 - Sessão 5.docx" }], "structure": "resources/modulo2/Módulo 2 - Estrutura.docx" }, { "number": 3, "title": "Módulo 3", "sessions": [{ "number": 1, "title": "Sessão 1: Introdução ao Scratch", "url": "modulo3/sessao1/", "cover": "covers/img_module_3.png", "resource": "resources/modulo3/M3 - Sessão 1.docx" }, { "number": 2, "title": "Sessão 2: Programar Jogo de Reações", "url": "modulo3/sessao2/", "cover": "covers/img_module_3.png", "resource": "resources/modulo3/M3 - Sessão 2.docx" }, { "number": 3, "title": "Sessão 3: Introdução à IA no Scratch", "url": "modulo3/sessao3/", "cover": "covers/img_module_3.png", "resource": "resources/modulo3/M3 - Sessão 3.docx" }, { "number": 4, "title": "Sessão 4: Meu Jogo Inteligente", "url": "modulo3/sessao4/", "cover": "covers/img_module_3.png", "resource": "resources/modulo3/M3 - Sessão 4.docx" }, { "number": 5, "title": "Sessão 5: Criar Jogos", "url": "modulo3/sessao5/", "cover": "covers/img_module_3.png", "resource": "resources/modulo3/M3 - Sessão 5.docx" }, { "number": 6, "title": "Sessão 6: Melhorar Equilibrar Testar Jogo", "url": "modulo3/sessao6/", "cover": "covers/img_module_3.png", "resource": "resources/modulo3/M3 - Sessão 6.docx" }, { "number": 7, "title": "Sessão 7: Sensores", "url": "modulo3/sessao7/", "cover": "covers/img_module_3.png", "resource": "resources/modulo3/M3 - Sessão 7.docx" }, { "number": 8, "title": "Sessão 8: Showroom", "url": "modulo3/sessao8/", "cover": "covers/img_module_3.png", "resource": "resources/modulo3/M3 - Sessão 8.docx" }], "structure": "resources/modulo3/Módulo 3 - Criar Jogos Com Scratch E Ia - Estrutura.docx" }, { "number": 4, "title": "Módulo 4", "sessions": [{ "number": 1, "title": "Sessão 1: Robótica Educativa", "url": "modulo4/sessao1/", "cover": "covers/img_module_4.png", "resource": "resources/modulo4/M4 - Sessão 1.docx" }, { "number": 2, "title": "Sessão 2: Robô Virtual", "url": "modulo4/sessao2/", "cover": "covers/img_module_4.png", "resource": "resources/modulo4/M4 - Sessão 2.docx" }, { "number": 3, "title": "Sessão 3: Seguidor de Linha", "url": "modulo4/sessao3/", "cover": "covers/img_module_4.png", "resource": "resources/modulo4/M4 - Sessão 3.docx" }, { "number": 4, "title": "Sessão 4: Ambientes Inteligentes", "url": "modulo4/sessao4/", "cover": "covers/img_module_4.png", "resource": "resources/modulo4/M4 - Sessão 4.docx" }, { "number": 5, "title": "Sessão 5: Vamos criar o nosso projeto de robótica com IA!", "url": "modulo4/sessao5/", "cover": "covers/img_module_4.png", "resource": "resources/modulo4/M4 - Sessão 5.docx" }, { "number": 6, "title": "Sessão 6: Robô Inteligente", "url": "modulo4/sessao6/", "cover": "covers/img_module_4.png", "resource": "resources/modulo4/M4 - Sessão 6.docx" }, { "number": 7, "title": "Sessão 7: Projetos de Robótica", "url": "modulo4/sessao7/", "cover": "covers/img_module_4.png", "resource": "resources/modulo4/M4 - Sessão 7.docx" }], "structure": "resources/modulo4/Módulo 4 - Robótica e IA do Digital ao Físico_Estrutura.docx" }, { "number": 5, "title": "Módulo 5", "sessions": [{ "number": 1, "title": "Sessão 1: IA Criativa", "url": "modulo5/sessao1/", "cover": "covers/img_module_5.png", "resource": "resources/modulo5/M5 - Sessão 1.docx" }, { "number": 2, "title": "Sessão 2: criar imagens com ia – ilustração e estilo visual", "url": "modulo5/sessao2/", "cover": "covers/img_module_5.png", "resource": "resources/modulo5/M5 - Sessão 2.docx" }, { "number": 3, "title": "Sessão 3", "url": "modulo5/sessao3/", "cover": "covers/img_module_5.png", "resource": "resources/modulo5/M5 - Sessão 3.docx" }, { "number": 4, "title": "Sessão 4: Criar Música e Sons", "url": "modulo5/sessao4/", "cover": "covers/img_module_5.png", "resource": "resources/modulo5/M5 - Sessão 4.docx" }, { "number": 6, "title": "Sessão 6: Portfólio Criativo", "url": "modulo5/sessao6/", "cover": "covers/img_module_5.png", "resource": "resources/modulo5/M5 - Sessão 6.docx" }] }];
        // Example for testing:
        // const modules = [{"number":1,"title":"Módulo 1","sessions":[{"number":1,"title":"Sessão 1: O que é a IA?","url":"modulo1/sessao1/","cover":"covers/img_module_1.png","resource":"resources/modulo1/Sessão 1.docx"},{"number":2,"title":"Sessão 2: Onde está a IA?","url":"modulo1/sessao2/","cover":"covers/img_module_1.png","resource":"resources/modulo1/Sessão 2.docx"},{"number":3,"title":"Sessão 3: Tipos de IA","url":"modulo1/sessao3/","cover":"covers/img_module_1.png","resource":"resources/modulo1/Sessão 3.docx"}],"structure":"resources/modulo1/Módulo 1 - Estrutura.docx"},{"number":2,"title":"Módulo 2","sessions":[{"number":1,"title":"Sessão 1: Pensamento Computacional","url":"modulo2/sessao1/","cover":"covers/img_module_2.png","resource":"resources/modulo2/M2 - Sessão 1.docx"},{"number":2,"title":"Sessão 2: Algoritmos","url":"modulo2/sessao2/","cover":"covers/img_module_2.png","resource":"resources/modulo2/M2 - Sessão 2.docx"},{"number":3,"title":"Sessão 3: tomar decisões com “se... então...” – introdução à lógica condicional","url":"modulo2/sessao3/","cover":"covers/img_module_2.png","resource":"resources/modulo2/M2 - Sessão 3.docx"},{"number":4,"title":"Sessão 4: Loops","url":"modulo2/sessao4/","cover":"covers/img_module_2.png","resource":"resources/modulo2/M2 - Sessão 4.docx"},{"number":5,"title":"Sessão 5","url":"modulo2/sessao5/","cover":"covers/img_module_2.png","resource":"resources/modulo2/M2 - Sessão 5.docx"}],"structure":"resources/modulo2/Módulo 2 - Estrutura.docx"},{"number":3,"title":"Módulo 3","sessions":[{"number":1,"title":"Sessão 1: Introdução ao Scratch","url":"modulo3/sessao1/","cover":"covers/img_module_3.png","resource":"resources/modulo3/M3 - Sessão 1.docx"},{"number":2,"title":"Sessão 2: Programar Jogo de Reações","url":"modulo3/sessao2/","cover":"covers/img_module_3.png","resource":"resources/modulo3/M3 - Sessão 2.docx"},{"number":3,"title":"Sessão 3: Introdução à IA no Scratch","url":"modulo3/sessao3/","cover":"covers/img_module_3.png","resource":"resources/modulo3/M3 - Sessão 3.docx"},{"number":4,"title":"Sessão 4: Meu Jogo Inteligente","url":"modulo3/sessao4/","cover":"covers/img_module_3.png","resource":"resources/modulo3/M3 - Sessão 4.docx"},{"number":5,"title":"Sessão 5: Criar Jogos","url":"modulo3/sessao5/","cover":"covers/img_module_3.png","resource":"resources/modulo3/M3 - Sessão 5.docx"},{"number":6,"title":"Sessão 6: Melhorar Equilibrar Testar Jogo","url":"modulo3/sessao6/","cover":"covers/img_module_3.png","resource":"resources/modulo3/M3 - Sessão 6.docx"},{"number":7,"title":"Sessão 7: Sensores","url":"modulo3/sessao7/","cover":"covers/img_module_3.png","resource":"resources/modulo3/M3 - Sessão 7.docx"},{"number":8,"title":"Sessão 8: Showroom","url":"modulo3/sessao8/","cover":"covers/img_module_3.png","resource":"resources/modulo3/M3 - Sessão 8.docx"}],"structure":"resources/modulo3/Módulo 3 - Criar Jogos Com Scratch E Ia - Estrutura.docx"},{"number":4,"title":"Módulo 4","sessions":[{"number":1,"title":"Sessão 1: Robótica Educativa","url":"modulo4/sessao1/","cover":"covers/img_module_4.png","resource":"resources/modulo4/M4 - Sessão 1.docx"},{"number":2,"title":"Sessão 2: Robô Virtual","url":"modulo4/sessao2/","cover":"covers/img_module_4.png","resource":"resources/modulo4/M4 - Sessão 2.docx"},{"number":3,"title":"Sessão 3: Seguidor de Linha","url":"modulo4/sessao3/","cover":"covers/img_module_4.png","resource":"resources/modulo4/M4 - Sessão 3.docx"},{"number":4,"title":"Sessão 4: Ambientes Inteligentes","url":"modulo4/sessao4/","cover":"covers/img_module_4.png","resource":"resources/modulo4/M4 - Sessão 4.docx"},{"number":5,"title":"Sessão 5: Vamos criar o nosso projeto de robótica com IA!","url":"modulo4/sessao5/","cover":"covers/img_module_4.png","resource":"resources/modulo4/M4 - Sessão 5.docx"},{"number":6,"title":"Sessão 6: Robô Inteligente","url":"modulo4/sessao6/","cover":"covers/img_module_4.png","resource":"resources/modulo4/M4 - Sessão 6.docx"},{"number":7,"title":"Sessão 7: Projetos de Robótica","url":"modulo4/sessao7/","cover":"covers/img_module_4.png","resource":"resources/modulo4/M4 - Sessão 7.docx"}],"structure":"resources/modulo4/Módulo 4 - Robótica e IA do Digital ao Físico_Estrutura.docx"},{"number":5,"title":"Módulo 5","sessions":[{"number":1,"title":"Sessão 1: IA Criativa","url":"modulo5/sessao1/","cover":"covers/img_module_5.png","resource":"resources/modulo5/M5 - Sessão 1.docx"},{"number":2,"title":"Sessão 2: criar imagens com ia – ilustração e estilo visual","url":"modulo5/sessao2/","cover":"covers/img_module_5.png","resource":"resources/modulo5/M5 - Sessão 2.docx"},{"number":3,"title":"Sessão 3","url":"modulo5/sessao3/","cover":"covers/img_module_5.png","resource":"resources/modulo5/M5 - Sessão 3.docx"},{"number":4,"title":"Sessão 4: Criar Música e Sons","url":"modulo5/sessao4/","cover":"covers/img_module_5.png","resource":"resources/modulo5/M5 - Sessão 4.docx"},{"number":6,"title":"Sessão 6: Portfólio Criativo","url":"modulo5/sessao6/","cover":"covers/img_module_5.png","resource":"resources/modulo5/M5 - Sessão 6.docx"}]}];

        // --- STATE MANAGEMENT ---
        const STORAGE_KEY = 'gf_hub_progress_v1';
        let progress = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
        let allSessionsFlat = [];

        function init() {
            // Flatten sessions for easy navigation
            allSessionsFlat = modules.flatMap(m => m.sessions.map(s => ({
                ...s,
                moduleId: m.number,
                moduleTitle: m.title,
                uniqueId: `m${m.number}-s${s.number}`
            })));

            renderApp();
            updateHeroContinue();
        }

        function renderApp() {
            const container = document.getElementById('modules-container');
            container.innerHTML = '';

            let totalSessions = 0;
            let completedSessions = 0;

            modules.forEach((mod, index) => {
                // Calculate Module Progress
                const modSessions = allSessionsFlat.filter(s => s.moduleId === mod.number);
                const modCompleted = modSessions.filter(s => progress[s.uniqueId]).length;
                const modPercent = Math.round((modCompleted / modSessions.length) * 100) || 0;

                totalSessions += modSessions.length;
                completedSessions += modCompleted;

                // Create Row
                const row = document.createElement('div');
                row.className = 'module-row pl-6 md:pl-16 mb-12 slide-in-right';
                row.style.animationDelay = `${index * 150}ms`;

                // Theme Colors
                const colors = getThemeColor(index);

                // Row Header
                // Resource Button Logic
                const structureButton = mod.structure ? `
                    <a href="${mod.structure}" target="_blank" download class="flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 transition-all group text-sm font-medium text-slate-300 hover:text-white">
                        <svg class="w-4 h-4 text-purple-400 group-hover:scale-110 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                        <span>Estrutura do Módulo</span>
                    </a>
                ` : '';

                row.innerHTML = `
                    <div class="flex items-center justify-between mb-6 pr-6">
                        <h3 class="flex items-center gap-4 text-2xl font-bold text-white">
                            <span class="${colors.text}">0${mod.number}.</span> ${mod.title || 'Módulo ' + mod.number}
                        </h3>
                        ${structureButton}
                    </div>

                    <div class="horizontal-scroll scroll-mask pb-8 pr-16 pl-1">
                        ${mod.sessions.map((sess, sIndex) => {
                    // Session Guide Button (Icon Overlay) - Opens HTML guide page
                    const guideButton = sess.resource ? `
                                    <a href="resources/modulo${mod.number}/sessao${sess.number}-guia.html" target="_blank" title="Ver Guia da Sessão" 
                                       onclick="event.stopPropagation()"
                                       class="absolute top-4 right-4 z-30 p-2 rounded-full bg-black/60 hover:bg-cyan-500/80 backdrop-blur-md border border-white/10 hover:border-white/30 transition-all group/btn text-slate-300 hover:text-white transform hover:scale-110 shadow-lg">
                                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                        </svg>
                                    </a>
                                ` : '';

                    const isDone = progress[`m${mod.number}-s${sess.number}`];
                    return `
                            <div 
                                class="glass-card flex-shrink-0 w-72 md:w-80 h-48 rounded-2xl relative overflow-hidden group cursor-pointer border-l-4 ${colors.border}"
                                onclick="openViewer('${sess.url}', '${sess.title}', 'm${mod.number}-s${sess.number}')"
                            >
                                ${guideButton}
                                <!-- Card Background / Thumbnail -->
                                <div class="absolute inset-0 bg-slate-900">
                                    ${sess.cover
                            ? `<img src="${sess.cover}" class="w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all duration-700" alt="${sess.title}">`
                            : `<div class="w-full h-full bg-gradient-to-br from-slate-900 to-slate-800"></div>`
                        }
                                </div>
                                <div class="absolute inset-0 bg-gradient-to-t from-black/95 via-black/50 to-transparent z-10"></div>
                                
                                <!-- Hover Glow -->
                                <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-tr ${colors.hoverOverlay} z-20 mix-blend-overlay"></div>

                                <!-- Content -->
                                <div class="absolute inset-0 p-6 flex flex-col justify-end z-20">
                                    <div class="absolute top-4 right-4 transform translate-x-10 group-hover:translate-x-0 transition-transform duration-300 opacity-0 group-hover:opacity-100">
                                        <div class="w-10 h-10 rounded-full bg-white text-black flex items-center justify-center shadow-lg shadow-white/20">
                                            <svg class="w-5 h-5 ml-0.5" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                                        </div>
                                    </div>

                                    <span class="text-xs font-mono text-${colors.accent}-400 mb-2">SESSÃO ${sess.number}</span>
                                    <h4 class="text-xl font-bold text-white leading-tight group-hover:text-${colors.accent}-100 transition-colors line-clamp-2">${sess.title}</h4>
                                    
                                    <!-- Status Indicator -->
                                    <div class="mt-4 flex items-center gap-2">
                                        ${isDone
                            ? `<span class="flex items-center gap-1.5 text-[10px] font-bold text-green-400 bg-green-400/10 px-2 py-0.5 rounded border border-green-400/20">
                                                 <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" /></svg>
                                                 CONCLUÍDO
                                               </span>`
                            : `<span class="text-[10px] font-bold text-slate-500 group-hover:text-white transition-colors">INICIAR AULA</span>`
                        }
                                    </div>
                                </div>
                            </div>
                            `;
                }).join('')}
                    </div>
                `;

                container.appendChild(row);
            });

            // Update Global Progress
            const globalPercent = Math.round((completedSessions / totalSessions) * 100) || 0;
            document.getElementById('globalProgress').textContent = `${globalPercent}%`;
        }

        function getThemeColor(index) {
            const themes = [
                { textGradient: 'from-purple-400 to-cyan-400', barGradient: 'from-purple-500 to-cyan-500', border: 'border-purple-500', accent: 'purple', hoverOverlay: 'from-purple-500/20 to-transparent' },
                { textGradient: 'from-cyan-400 to-blue-400', barGradient: 'from-cyan-500 to-blue-500', border: 'border-cyan-500', accent: 'cyan', hoverOverlay: 'from-cyan-500/20 to-transparent' },
                { textGradient: 'from-pink-400 to-rose-400', barGradient: 'from-pink-500 to-rose-500', border: 'border-pink-500', accent: 'pink', hoverOverlay: 'from-pink-500/20 to-transparent' },
                { textGradient: 'from-amber-400 to-orange-400', barGradient: 'from-amber-500 to-orange-500', border: 'border-amber-500', accent: 'amber', hoverOverlay: 'from-amber-500/20 to-transparent' },
                { textGradient: 'from-emerald-400 to-teal-400', barGradient: 'from-emerald-500 to-teal-500', border: 'border-emerald-500', accent: 'emerald', hoverOverlay: 'from-emerald-500/20 to-transparent' },
            ];
            return themes[index % themes.length];
        }

        function updateHeroContinue() {
            // Find first uncompleted session
            const nextSession = allSessionsFlat.find(s => !progress[s.uniqueId]);
            const card = document.getElementById('continueHeroCard');
            const titleEl = document.getElementById('heroContinueTitle');
            const btn = card.querySelector('button');

            if (nextSession) {
                titleEl.textContent = `Módulo ${nextSession.moduleId}: ${nextSession.title}`;
                btn.onclick = () => openViewer(nextSession.url, nextSession.title, nextSession.uniqueId);
                card.classList.remove('hidden');
            } else {
                // All done?
                titleEl.textContent = "Você completou tudo! Revisar?";
                btn.onclick = () => scrollTo(0, 500);
                card.classList.remove('hidden');
            }
        }

        function markAsComplete(uniqueId) {
            if (!progress[uniqueId]) {
                progress[uniqueId] = true;
                localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
                renderApp(); // Re-render to show checkmarks
                updateHeroContinue();
            }
        }

        // --- VIEWER LOGIC ---
        let currentViewerIndex = -1;

        function openViewer(url, title, uniqueId) {
            currentViewerIndex = allSessionsFlat.findIndex(s => s.uniqueId === uniqueId);
            const overlay = document.getElementById('modalOverlay');
            const content = document.getElementById('modalContent');
            const iframe = document.getElementById('presentationFrame');

            // Set Content
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBreadcrumbMod').textContent = `MÓDULO ${allSessionsFlat[currentViewerIndex].moduleId}`;
            iframe.src = url;

            // Show
            overlay.classList.remove('hidden');
            // Trigger animation
            requestAnimationFrame(() => {
                overlay.classList.remove('opacity-0');
                content.classList.remove('opacity-0', 'scale-95');
                content.classList.add('scale-100');
            });

            markAsComplete(uniqueId);
            updateNavState();
        }

        function closeViewer() {
            const overlay = document.getElementById('modalOverlay');
            const content = document.getElementById('modalContent');
            const iframe = document.getElementById('presentationFrame');

            overlay.classList.add('opacity-0');
            content.classList.add('opacity-0', 'scale-95');
            content.classList.remove('scale-100');

            setTimeout(() => {
                overlay.classList.add('hidden');
                iframe.src = '';
            }, 300);
        }

        function navigateSession(dir) {
            const newIndex = currentViewerIndex + dir;
            if (newIndex >= 0 && newIndex < allSessionsFlat.length) {
                const nextSess = allSessionsFlat[newIndex];
                // Fade swap
                const iframe = document.getElementById('presentationFrame');
                iframe.style.opacity = '0';

                setTimeout(() => {
                    openViewer(nextSess.url, nextSess.title, nextSess.uniqueId);
                    iframe.onload = () => iframe.style.opacity = '1';
                }, 300);
            }
        }

        function updateNavState() {
            document.getElementById('prevBtn').style.display = currentViewerIndex > 0 ? 'flex' : 'none';
            document.getElementById('nextBtn').style.display = currentViewerIndex < allSessionsFlat.length - 1 ? 'flex' : 'none';
        }

        function onFrameLoad() {
            document.getElementById('presentationFrame').style.opacity = '1';
        }

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.getElementById('modalContent').requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }

        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('modalOverlay').classList.contains('hidden')) return;
            if (e.key === 'Escape') closeViewer();
            if (e.key === 'ArrowRight') navigateSession(1);
            if (e.key === 'ArrowLeft') navigateSession(-1);
        });

        // --- HELP MODAL LOGIC ---
        function openHelp() {
            const overlay = document.getElementById('helpModal');
            const content = document.getElementById('helpContent');
            overlay.classList.remove('hidden');
            requestAnimationFrame(() => {
                overlay.classList.remove('opacity-0');
                content.classList.remove('scale-95');
                content.classList.add('scale-100');
            });
        }

        function closeHelp() {
            const overlay = document.getElementById('helpModal');
            const content = document.getElementById('helpContent');
            overlay.classList.add('opacity-0');
            content.classList.add('scale-95');
            content.classList.remove('scale-100');
            setTimeout(() => {
                overlay.classList.add('hidden');
            }, 300);
        }

        // Init on load if modules present (local test) or wait for injection
        if (modules.length > 0) init();

        window.initHub = init; // Expose for injection script
    </script>
</body>

</html>